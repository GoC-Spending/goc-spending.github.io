<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <base href="/">
  <title>Analyzing GoC Contract Spending</title>

  
  
</head>

<body>

  <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
  
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="navbar-collapse collapse" id="navbarCollapse">
    <ul class="navbar-nav mr-auto">

        
        
        <li class="nav-item">
          <a class="nav-link" title="Home" href="/">Home</a>
        </li>
        
        <li class="nav-item active">
          <a class="nav-link" title="Methodology" href="/methodology/">Methodology <span class="sr-only">(current)</span></a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link" title="Analysis" href="/analysis/">Analysis</a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link" title="Data" href="/download/">Data</a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link" title="About" href="/about/">About</a>
        </li>
        
    </ul>
  </div>
</nav>

  <main role="main" class="container">
   
<article class="content">
  <main>

<h1 id="methodology-and-sources">Methodology and sources</h1>

<p>This <a href="/about">volunteer-led project</a> began in 2017 as an effort to better understand federal government contract spending at a government-wide level. The page below describes the data sources and methodology used to produce the combined dataset as well as the aggregate trends displayed on the Analysis page.</p>

<h2 id="data-sources">Data sources</h2>

<h3 id="proactive-disclosure-websites">Proactive disclosure websites</h3>

<p>Data on federal government contract spending was sourced from each department’s <a href="https://www.canada.ca/en/treasury-board-secretariat/services/reporting-government-spending/proactive-disclosure-department-agency.html">Proactive Disclosure</a> websites.</p>

<p>These websites listed contracts and amendments by the fiscal quarter in which the contract or amendment was initiated. Information for a given contract or amendment was displayed on an individual webpage. These webpages would typically list:</p>

<ul>
<li>the name of the vendor</li>
<li>a reference number</li>
<li>the contract date (when it was recorded in the department’s financial system)</li>
<li>the contract period (start and end), or a delivery date</li>
<li>the total value of the contract</li>
<li>a description of what work was requested</li>
</ul>

<p>The contract value indicates the amount of money that the government <strong>commits</strong> to spending through the contract, rather than a transactional record of funds being spent at a given point in time.</p>

<p>In many cases, these webpages would also include an original value for the contract, if it was different than the total or final value, or the additional value of the most recent amendment to it. Many of the webpages also included comments describing if the contract was (for example) sole-sourced, part of a standing offer list, or a correction to a previous contract entry. These comments were freeform text and weren’t written consistently from one entry to the next.</p>

<p>Although the structure of these webpages was similar from one department to the next, they were each created separately by each department. As a result, the HTML code of each proactive disclosure website was different enough that individual web scrapers had to be created for each department. <span class="variable">36</span> different web scrapers were created and used to retrieve departmental proactive disclosure website data.</p>

<h3 id="open-government-dataset">Open Government dataset</h3>

<p>Beginning in 2016, departments began migrating their proactive disclosure information to a common dataset on the Open Government website (open.canada.ca).</p>

<p>This dataset is in a consistently structured CSV file that is updated on a regular basis with new data from departments. It includes the data elements above, along with a range of other fields (whether the contract involves a former public servant, commodity codes, standing offer numbers, the country of origin, etc.). Having this data collected in a consistent place makes it much easier to analyze at scale and across the federal government.</p>

<p>However, for most departments, this dataset only includes contract data going back to 2016. (A small number of departments provided historical data back as far as 2005 within the dataset, which is commendable.) Meanwhile, as departments began providing data via the Open Government dataset, they stopped updating their individual proactive disclosure webpages. This was often done in conjunction with the migration of departmental websites to Canada.ca.</p>

<p>As a result, neither the Open Government dataset nor the individual departmental proactive disclosure websites provided a full historical overview of contract spending. This project was an effort to bring these together into a single, historically comprehensive dataset.</p>

<p>At least <span class="variable">8</span> departments have taken their proactive disclosure websites offline since 2017 when this project began. For these departments, the <a href="https://github.com/GoC-Spending/goc-spending-data">scraped data collected for this project</a> is likely the only publicly-available source of this data.</p>

<p>The Open Government dataset <a href="https://open.canada.ca/data/en/dataset/d8f85d91-7dec-4fd1-8055-483b77225d8b">can be downloaded here from open.canada.ca</a>. The point-in-time copy used for the aggregate trend analysis (from <span class="variable">2019-03-24</span>) is archived [here]. You can <a href="/download">download the combined dataset</a> to conduct further analyses on your own.</p>

<h2 id="limitations-and-assumptions">Limitations and assumptions</h2>

<h3 id="limited-departmental-scope">Limited departmental scope</h3>

<p>The combined dataset includes data from <span class="variable">36</span> departments’ publicly-available Proactive Disclosure websites, and from <span class="variable">83</span> departments or agencies represented in the Open Government dataset.</p>

<p>Combined, this represents <span class="variable">84</span> departments, <span class="variable">77%</span> of the <span class="variable">109</span> departments and agencies that are subject to government Proactive Disclosure of contracts policies. It does not include crown corporations or federal museums, the House of Commons or Senate, or security agencies.</p>

<h3 id="limited-historical-data">Limited historical data</h3>

<p>The time range of historical data varied from one department to another. Proactive Disclosure websites went back as far as 2005 for some departments, or only as far back as 2012 for others. Data from the Open Government dataset typically only went back as far as 2015 or 2016 (with some notable exceptions, including CEAA, DND, ECCC, ESDC, GAC, PCH, PSC, and CRA which provided comprehensive historical data going back to 2004 within the Open Government dataset).</p>

<p>One consequence of this is that year-by-year trends are likely to show an exaggerated increase in contract spending over time. The perceived increase would be caused in part by more complete data as the year gets closer to the present.</p>

<p>Many of the largest departments (for example, PSPC and DND) include data as far back as at least 2007. As a result, we’ve used 2008 to 2017 (a ten-year time period) as the time range for any year-over-year trend analyses.</p>

<h3 id="inconsistent-date-formats">Inconsistent date formats</h3>

<p>In both data sources, formatting for dates was highly inconsistent (despite a <a href="https://www.tbs-sct.gc.ca/pol/doc-eng.aspx?id=17284">federal standard requiring the ISO 8601 date format</a>). Some departments used <code>YYYY-MM-DD</code>; others used <code>YYYY-DD-MM</code>; others used <code>MM/DD/YYYY</code> or spelled out months in words. Departments occasionally used different date formats from one contract entry to the next, or from one date field to the next of the same contract entry.</p>

<p>In other cases, contract entries included more problematic dates. For example:</p>

<ul>
<li><code>2006-09-31</code></li>
<li><code>2012-31-03</code></li>
<li><code>2012-00-30</code></li>
<li><code>2005-19-15</code></li>
<li><code>2015-30-30</code></li>
<li><code>2015-02-1-22</code></li>
<li><code>42033</code></li>
<li><code>20156-03-31</code></li>
<li><code>Incorrect data type for operator or @Function: Time/Date expected-ed-ed</code></li>
</ul>

<p>For many date entries, distinguishing months and days was not possible. The year was the most consistently-identifiable date (any four-digit number beginning with 19 or 20). As a result, start and end calendar years became the most reliable date available from contract entries.</p>

<p>This differs, however, from Government of Canada financial systems that use an April 1 to March 31 fiscal year. As a result, comparing this data (aggregated by calendar year) to other government financial records (aggregated by fiscal year) is difficult.</p>

<p>Up to 2016, the Treasury Board Secretariat published <a href="https://www.canada.ca/en/treasury-board-secretariat/corporate/reports/contracting-data.html">Purchasing Activity Reports</a> that detailed government spending by calendar year.</p>

<p>The <a href="https://www.canada.ca/en/treasury-board-secretariat/corporate/reports/contracting-data/2016-purchasing-activity-report.html">2016 Purchasing Activity Report</a> states a total of $18.2B in contract spending that year ($17B for contracts $25k and above, and $1.2B for contracts under $25k). This is comparable to %total2016ContractSpending% in total 2016 contract spending included in the combined dataset, which provides a useful gut-check.</p>

<h3 id="linearized-year-to-year-effective-spending">Linearized year-to-year effective spending</h3>

<p>Contract and amendment entries that spanned more than one year included the contract period (or start and end date) of the contract, as well as the total value.</p>

<p>In practice, departments would have spent this money at different rates from one year to the next of a given contract (for example, spending a significant percentage of the total value early on in the contract for an initial deliverable, and less for continued maintenance in later years).</p>

<p>However, the data provided (by both initial contract and amendment entries) does not include year-by-year spending amounts. In order to model spending on a particular contract over several years, the total amount is evenly divided across each of the years of the contract. This assumes that the department spent the same amount each year of the contract (linear spending).</p>

<p>For contracts with amendments, the year-by-year rate was calculated separately for each amendment “segment” of the contract, such that the year-by-year totals of each segment would sum up to the final total value of the contract. This is described in more detail under the Contract Amendments section below.</p>

<h2 id="steps">Steps</h2>

<h3 id="scraping-and-parsing-proactive-disclosure-html">Scraping and parsing proactive disclosure HTML</h3>

<p>Custom <a href="https://github.com/GoC-Spending/goc-spending-laravel/tree/master/app/DepartmentHandlers">web scrapers for each department</a> were written in PHP, using the <a href="https://github.com/guzzle/guzzle">Guzzle</a> and <a href="https://github.com/stil/xpath-selector">xpath-selector</a> libraries.</p>

<p>In most cases, departments used a very similar model for the structure of their Proactive Disclosure websites: a top-level index page listing fiscal quarters; a page for each fiscal quarter listing all the contracts from that time period; and a page for each contract with the complete contract details (described above).</p>

<p>Scraping contract data for a given department involved:</p>

<ol>
<li>scraping the index page</li>
<li>storing the list of URLs for each fiscal quarter page</li>
<li>scraping each fiscal quarter page</li>
<li>storing the list of URLs for each contract page</li>
<li>scraping each contract page, saving the HTML of the main content to a file</li>
</ol>

<p>Scraping and saving the contract pages’ HTML was done separately from parsing the HTML to identify actual data fields. This was done partly out of convenience (scraping was a slow process, and so parser functions could be written while the scraper was in progress) and partly to maintain a backup copy of departments’ contract pages. This was ultimately useful given that several departments shut down their Proactive Disclosure websites throughout the course of the project, as they began publishing via the Open Government dataset instead.</p>

<p>The saved HTML pages were parsed using Xpath selectors, to identify specific table cells and rows for each section (contract name, total value, delivery date, etc.). These were usually quite similar from one department to the next, but differed enough that separate parser functions or parameters were also needed each time.</p>

<p>The parsed data was then stored in individual, consistently-structured JSON files for each contract page (<a href="https://github.com/GoC-Spending/goc-spending-data">available on GitHub here</a>). Scraping an average department would result in thousands of JSON files, one for each contract or amendment. These were kept in separate, small files in order to avoid triggering the GitHub file size limit of 100MB.</p>

<p>Finally, these JSON files were imported into a PostgreSQL database (via Laravel’s database functions) in order to be more easily analyzed, searched, and aggregated.</p>

<h3 id="importing-open-government-csv-data">Importing Open Government CSV data</h3>

<p>Importing data from the Open Government CSV file was considerably easier than scraping and parsing departmental Proactive Disclosure webpages. Given the consistent structure of the data, only one set of functions was needed to import it (rather than a unique set for each department).</p>

<p>These functions looped through each row of the CSV file, stored the data that matched the fields included on the Proactive Disclosure webpages, and then imported these to the same PostgreSQL database.</p>

<h3 id="basic-error-detection">Basic error detection</h3>

<p>For both data sources, a set of basic error checks were applied. Contracts without a source fiscal year or without a contract value (or one of $0) were flagged, to avoid including them in subsequent analyses or exports. CSV entries that didn’t include a departmental owner acronym, a vendor name, or a contract value were also flagged separately.</p>

<h3 id="vendor-name-normalization">Vendor name normalization</h3>

<p>The contracting data from both sources only provided a free-text vendor name field, without a business number or other official identifier. Matching together data from the same vendor was challenging as a result. Variations in vendor names could result from:</p>

<ul>
<li>Inconsistent spelling</li>
<li>Legal suffixes (e.g. Ltd. or Inc.) inconsistently being included</li>
<li>Abbreviations inconsistently being used</li>
<li>Regional office names being included</li>
<li>Company name changes occurring over time</li>
<li>Joint ventures or partnerships</li>
<li>Mergers and acquisitions</li>
</ul>

<p>Normalizing vendor names included two steps. Vendor names were first “cleaned” to remove punctuation and special characters, as well as <a href="https://github.com/GoC-Spending/goc-spending-laravel/blob/master/app/VendorData.php#L17">any known legal suffixes</a>.</p>

<p>Then, vendor names were manually matched together with their “parent” company, in a large matching table. <strong>This <a href="https://github.com/GoC-Spending/goc-spending-vendors/blob/master/vendor_data.csv">vendor matching table is available as a CSV file</a> and includes <span class="variable">3552</span> rows.</strong> It includes matching entries for the largest several hundred companies in the combined dataset, based on an early aggregate analysis of the data.</p>

<p>Because this matching was done by hand (looking up company names with similar keywords or character sequences in the database), it has a number of important limitations:</p>

<ul>
<li>Smaller companies are not included, and so their entries will not be associated together in aggregate analyses.</li>
<li>Joint ventures or partnerships are listed with only one of the participating companies (chosen arbitrarily, based on whichever manual database lookup was done first).</li>
<li>Resellers of another company’s products are sometimes merged with the original company, and sometimes included as standalone companies.</li>
<li>Companies with an identical name but working in different fields (for example, those based on common words like “Atmosphere”) are incorrectly merged together.</li>
<li>Companies with a wide range of subsidiary companies in different industries are merged as a single company, which makes it harder to do per-industry analyses (for example, telecommunications companies that also do IT systems integration, or defence companies that also provide temporary help services).</li>
<li>And, companies that changed names through mergers or acquisitions were normalized together when this was easily discoverable through cursory Google searches – which is to say, somewhat inconsistently.</li>
</ul>

<h3 id="date-validation">Date validation</h3>

<p>As described above, inconsistent date formatting was an early challenge. Contract entries included some combination of the following set of dates:</p>

<ul>
<li>Contract date (when the contract or amendment was registered in the department’s financial system), which was always included</li>
<li>Delivery date (typical for goods, when it would be delivered to the department – functionally the end of the contract), or,</li>
<li>Contract period, which included a start and end date (typical for services, the start and end of e.g. professional work)</li>
</ul>

<p>Because inconsistent date formatting made it impossible to accurately determine months or dates, contract start and end dates were set to the closest year (<a href="https://github.com/GoC-Spending/goc-spending-laravel/blob/master/app/Helpers/Parsers.php#L158">using a regular expression</a> that identified four-digit numbers beginning with 19 or 20, somewhere in the date text).</p>

<p>For contract and amendment entries that included a contract period, these start and end dates were used for the start and end years of the contract. If no contract period was specified, then the contract date was used for the start year, and the delivery date was used for the end year (in many cases, these were the same year). If only a contract date was specified, and no other dates, then this was assumed to be both the start and end year of the contract.</p>

<p>Inconsistent date formatting is a known issue to the Open Government team, which is <a href="https://github.com/open-data/ckanext-canada/blob/contracts-changes/bin/migrate/migrate_contracts_2018_04.py">planning to fix dates in the CSV dataset</a> in the near future.</p>

<h3 id="duplicate-entries">Duplicate entries</h3>

<p>Because data was sourced from both the Proactive Disclosure websites and the Open Government dataset, it was important to find and remove duplicate entries (to avoid counting the same contracts or amendments more than once). This process also handled any duplicate entries that might have existed within each data sources.</p>

<p>Given the data quality limitations described above, three different methods of detecting duplicate entries were used:</p>

<ol>
<li>Contracts with the same contract value, same normalized vendor name, and same (raw) contract date.</li>
<li>Contracts with the same contract value, same normalized vendor name, same reference number, and same (cleaned) start year. This handled any cases where the same contract or amendment was included more than once with the date formatted differently each time.</li>
<li>Contracts with the same contract value and the same reference number. This handled any cases where the both the date and the vendor name were formatted or written differently each time (and the raw vendor name wasn’t included in the vendor normalization table).</li>
</ol>

<p>Given that the duplicate detection relied heavily on having the same contract value, it will have missed entries where the total contract value was written inconsistently. It likely also over-estimated entries that were not duplicates but that had the same vendor, start year, and total value – namely, contracts that were at the top of disclosure or sole-source financial thresholds (e.g. contracts with a value of exactly $10k or $25k).</p>

<h3 id="detecting-and-grouping-contract-amendments">Detecting and grouping contract amendments</h3>

<p>The source data did not have a consistent way of identifying amendments and linking them to their original contracts. In many (but not all cases), a free-text note in the “comments” field was included describing an entry as an amendment to a previous contract. These comments typically did not include more details or identifiers that would help users find the original contract, and were not in a machine-readable format.</p>

<p>Contract and amendment entries almost always included a reference number, which was the most promising method for linking amendments to each other and to the original contract entry. The amendment finding function found entries with the same normalized vendor name, the same reference number, the same start year, and a different contract value. It excluded entries that had been marked as duplicates by the methods above, as well as any entries flagged by the <a href="#basic-error-detection">basic error detection</a> functions.</p>

<p>This process grouped related contract and amendments together using an “amendment group ID”, that could then be used to determine changes to the same contract over time.</p>

<p>In some cases, departments would include variations to the reference number for subsequent amendments (e.g. adding a numerical suffix of some kind). These were not done in a consistent enough way to easily include them in the amendment finding function.</p>

<p>The amendment finding function restricted itself to one department at a time (to avoid false positives where contracts with coincidentally the same vendor, reference number, and value from different departments would have been matched together). As a result, this process may have excluded or miscounted any contract and amendment entries that were “handed off” from one department to another (e.g. from PSPC to SSC after its creation).</p>

<h3 id="normalizing-by-year">Normalizing by year</h3>

<p>Once contract and amendment entries were grouped together, it was possible to determine normalized per-year values over the lifetime of a contract.</p>

<p>For contracts without amendments, this was straightforward: take the total value of the contract and divide it by the number of years it was in effect, to determine the value per year. (Because these contracts were <a href="#linearized-year-to-year-effective-spending">linearized by year</a>, they should be considered estimates rather than precise values.) For contracts that only spanned a single year, the per-year value is the same as the total value.</p>

<p>For contracts with amendments, the following steps were used:</p>

<ul>
<li>Sort the linked contract and amendment entries by source fiscal quarter in which they were published. This ensures that the most recent entry published by the department is the “canonical” one, used to determine the final contract value and the end year (if a long-term contract was shortened in a later amendment).</li>
<li>Correct for any edge cases with inconsistent dates:

<ul>
<li>If the start year is later than the end year, set the end year to be the same as the start year.</li>
<li>If the start year of the most recent amendment is earlier than the original contract entry’s start year, use the start year of the most recent amendment.</li>
</ul></li>
<li>Create a list of years that span from the start year to the end year.</li>
<li>Match each year to the contract or amendment entry that would have been in effect that year:

<ul>
<li>The earliest effective year is the start year of the original contract entry (the entry in the amendment group that was published first, by source fiscal quarter).</li>
<li>Subsequent years (if any) are associated with the original contract entry, up until the year in which an amendment was published (by source year), at which point that year and the years afterwards would be associated with the amendment entry instead of the original contract entry.</li>
<li>The same would be true for any subsequent amendments.</li>
<li>For the very last amendment entry, the effective start year would be year in which it was published (by source year) and the effective end year would be the end year listed in the amendment entry.</li>
</ul></li>
</ul>

<p>For example, imagine an amendment group with four entries:</p>

<ul>
<li>#1. Published: 2005. Start year: 2005. End year: 2009. Value: $10M.</li>
<li>#2. Published: 2007. Start year: 2005. End year: 2011. Value: $10M.</li>
<li>#3. Published: 2010. Start year: 2005. End year: 2011. Value: $15M.</li>
<li>#4. Published: 2011. Start year: 2005. End year: 2015. Value: $20M.</li>
</ul>

<p>The effective years would be as follows:</p>

<ul>
<li>2005: #1.</li>
<li>2006: #1.</li>
<li>2007: #2.</li>
<li>2008: #2.</li>
<li>2009: #2.</li>
<li>2010: #3.</li>
<li>2011: #4.</li>
<li>2012: #4</li>
<li>2013: #4.</li>
<li>2014: #4.</li>
<li>2015: #4.</li>
</ul>

<p>To calculate the effective contract value for each year, the steps below were used. The goal was to describe the contract value as accurately as possible for the time period of the contract or amendment in effect at the time.</p>

<ul>
<li>For the first entry, calculate the effectively yearly value over the original start and end years of the contract. Then, store the per-year values for the years in which that entry was in effect (and not replaced by a subsequent amendment entry).</li>
<li>For subsequent entries, calculate the effective yearly value over the source year and end years of the amendment entry, <strong>minus the cumulative effective values of the previous entries</strong>, then store those per-year values for the years in which the amendment was in effect.</li>
<li>Do the same steps for any subsequent entries.</li>
</ul>

<p>For the example above, the effective yearly values would be as follows:</p>

<ul>
<li>2005: #1. Yearly value: $2M ($10M over 2005-2009, 5 years).</li>
<li>2006: #1. Yearly value: $2M.</li>
<li>2007: #2. Yearly value: $1.2M ($10M minus the $4M cumulative - values above, over 2007-2011 or 5 years).</li>
<li>2008: #2. Yearly value: $1.2M.</li>
<li>2009: #2. Yearly value: $1.2M.</li>
<li>2010: #3. Yearly value: $3.7M ($15M minus the $7.6M cumulative - values above, over 2010-2011 or 2 years).</li>
<li>2011: #4. Yearly value: $1.74M ($20M minus the $11.3 cumulative - values above, over 2011-2015 or 5 years).</li>
<li>2012: #4. Yearly value: $1.74M.</li>
<li>2013: #4. Yearly value: $1.74M.</li>
<li>2014: #4. Yearly value: $1.74M.</li>
<li>2015: #4. Yearly value: $1.74M.</li>
</ul>

<p>As this example shows, the effective yearly value changes with amendments to the contract. The total cumulative value should always equal the total value field listed in the most recent, “canonical” amendment entry. In this example, adding up the yearly value from each year equals the $20M total value listed in the last amendment entry.</p>

<p>As the example shows, if the time range of a contract is extended (by a subsequent amendment) without increasing the total contract value, then the effective per-year value decreases. In some cases, a subsequent amendment will include a contract value that is smaller than previous entries (if a contract was renegotiated to be smaller than originally planned) which can result in a negative yearly value. In all cases, the cumulative effective yearly values of a given group of matching contract and amendment entries should equal the total value of the most recent entry.</p>

<h3 id="producing-aggregate-analysis-trends">Producing aggregate analysis trends</h3>

<p>With amendment entries grouped together and effective yearly values calculated, it’s possible to produce aggregate totals on a per-year basis across, for example, a given department, a given company, or the government as a whole.</p>

<p>Given the <a href="#limited-historical-data">limited historical coverage</a> of the data, these per-year trends become less accurate further back in time. One consequence of this is that the total effective values (e.g. total contract spending on a government-wide level) appear to increase more significantly than they do in practice, because the coverage of the data improves over time (namely, including data from more departments). For the <a href="/analysis">aggregated statistics</a> included here, a time range from 2008 to 2017 was chosen.</p>

<p>To make it easier to produce aggregate statistics, two additional database tables were created and populated from the “source” table that contained the combined dataset:</p>

<ul>
<li>An initial “export” database table, that included all the entries from the combined dataset except for rows that were marked as duplicates or errors.</li>
<li>A second “by year” database table, that created separate rows for each of the effective years of the contracts and amendment groups in the “export” database table. This table made it easier to do per-year analyses of the data.</li>
</ul>

<p>You can <a href="/download">download these tables in CSV format</a>.</p>

<p>Aggregate statistics were produced using simple SQL queries on these database tables:</p>

<ul>
<li>Statistics on the total number of contract or amendment entries were calculated from the “source” table.</li>
<li>Statistics on total effective (monetary) values over time were calculated from the “by year” table.</li>
</ul>

<p>Results from the “by year” table on the largest overall vendors were used to improve the <a href="#vendor-name-normalization">vendor normalization table</a>, over several iterations.</p>

<p>A <a href="https://github.com/GoC-Spending/goc-spending-laravel/blob/master/app/AnalysisOps.php">class of analysis functions</a> was used to perform database queries and export the results as CSV files. The <a href="https://github.com/GoC-Spending/goc-spending-analysis">resulting analysis CSV files</a> are available on GitHub. These same queries are used to produce the charts on the <a href="/analysis">Analysis</a> page.</p>

<h2 id="future-improvements">Future improvements</h2>

<h3 id="natural-language-processing-to-normalize-vendor-names">Natural language processing to normalize vendor names</h3>

<p>The vendor normalization table was <a href="#vendor-name-normalization">created manually</a>, and based on the largest vendors in the dataset. There are <span class="variable">TBD</span> unique vendor name entries in the combined dataset, and only <span class="variable">3552</span> normalization entries included in the vendor normalization table. Natural language processing tools could be used to more effectively group together these entries, which would improve the aggregate statistics for the “long tail” of smaller vendors in particular.</p>

<h3 id="automatic-determination-of-vendor-industry">Automatic determination of vendor industry</h3>

<p>The by-industry aggregate statistics (to be completed) are currently determined manually. The primary or secondary industry of a given vendor is determined by the following table (to be completed), and only includes the largest vendors in these fields.</p>

<p>It would be useful to be able to automatically determine the industry or industries of a given vendor, from outside data sources (company registries, Wikipedia, etc.). This would allow for government-wide aggregate statistics by industry, rather than just highlights of the largest vendors in a given industry.</p>

<h3 id="contract-by-contract-industry-categorization-using-object-codes-and-machine-learning">Contract-by-contract industry categorization, using object codes and machine learning</h3>

<p>Aggregate statistics by industry (to be completed) are currently done at the company level, rather than at the contract level. Being able to consistently determine the industry or nature of the work on a per-contract level would improve these per-industry statistics significantly.</p>

<p>Many of the largest vendors contracting with the Canadian government provide services in a variety of fields. Being able to capture this at a more granular level would be beneficial.</p>

<p>Contract entries often include descriptions of work and, in some cases, object codes that could be used to automatically determine what industry a given contract falls within.</p>

<h3 id="improved-date-parsing-and-fiscal-year-not-calendar-year-aggregate-analysis">Improved date parsing and fiscal year (not calendar year) aggregate analysis</h3>

<p>Given the date formatting and quality limitations, the effective year calculations above are done to the nearest calendar year. With improved date parsing (and some assumptions around month and day values), effective values could be determined by exact date rather than by year.</p>

<p>This would allow for aggregate statistics that map to government fiscal years, rather than just calendar years, which would be easier to compare to other government data sources.</p>

<h3 id="better-programming-languages-for-data-analysis">Better programming languages for data analysis</h3>

<p>The bulk of the <a href="https://github.com/GoC-Spending/goc-spending-laravel">scraping, parsing, and analysis code</a> for this project was written in <a href="https://php.net/">PHP</a> using <a href="https://laravel.com/">Laravel</a>.</p>

<p>Data science practitioners tend to use <a href="https://www.python.org/">Python</a> or <a href="https://www.r-project.org/">R</a> for similar projects, which provide access to a wide range of useful open-source data science tools. You can find some useful introductory resources here:</p>

<ul>
<li><a href="http://www.data-analysis-in-python.org/">Data Analysis in Python</a></li>
<li><a href="https://r4ds.had.co.nz/">R for Data Science</a></li>
</ul>
</main>
</article>

  </main>

  
<footer class="container">
  <p>An <a href="http://ottawacivictech.ca">Ottawa Civic Tech</a> project.</p>
</footer>

  
  
    <script src="/main.3fd9e.js"></script>
  
</body>

</html>
